### Day 6
#### React App의 데이터 페칭
- 컴포넌트 렌더링(마운트) 이후에 발생
- 사용자가 빈 화면을 보게 되는 시간이 발생한다. 이는 JavaScript가 다운로드되고 데이터를 가져오기까지 기다려야 하기 때문이다.

#### Next App의 데이터 페칭
- 사전 렌더링 중에 발생
- 다양한 사전 렌더링 방식을 지원하고 이는 컴포넌트 마운트 이전에 서버에서 미리 데이터를 가져와서 HTML 페이지를 완성할 수 있게 해준다.
- 사용자는 기다릴 필요 없이 완성된 페이지를 볼 수 있다.

#### SSR (Server Side Rendering)
요청이 들어올 때마다 서버에서 페이지를 미리 완성하여 사용자에게 보내주는 사전 렌더링 방식이다. <br/>
- 동작 방식: 사용자의 페이지 요청이 있을 때마다 서버가 데이터를 가져와서 HTML 파일을 생성한 후 사용자에게 전달한다.
- 장점: 사용자가 접속할 때마다 실시간으로 데이터를 반영하여 페이지를 만들기 때문에 페이지 내부의 데이터가 항상 최신 상태로 유지된다.
- 단점: 서버는 데이터가 모두 도착할 때까지 HTML 생성을 시작할 수 없어서 API 응답이 지연될 경우 사용자는 빈 화면을 기다려야 하는 시간이 늘어난다. 

```ts
export const getServerSideProps = () => {
  const data = "hello";

  return {
    props: {
      data,
    },
  };
};
```

```ts
export default function Home({
  data,
}: InferGetServerSidePropsType<typeof getServerSideProps>) {
  useEffect(() => {
    console.log(window);
  }, []);

  return (
    // ... TSX 코드
  );
};
```
- 사용자가 웹페이지를 요청하면 `getServerSideProps` 실행하고 `data` 변수가 준비된다. 
- 서버는 준비된 `data`를 `Home` 컴포넌트에 넣어 렌더링한다. 
- 서버는 완성된 HTML 페이지를 클라이언트에 전송한다.
- 사용자는 `data`가 포함된 페이지를 보게 되고 이후에 hydration 과정을 거치며 `Home` 컴포넌트를 브라우저에서 다시 실행한다. 
- 페이지가 hydration 과정을 마치고 마운트되면 `useEffect`가 실행된다. 

### Day 7
#### SSG (Static Site Generation)
> 빌드 시점에 페이지를 미리 렌더링하여 HTML 파일을 생성해두는 사전 렌더링 방식
- SSR의 단점인 요청마다 발생하는 서버 부하와 느린 응답 속도를 해결하기 위해 사용된다.
- SSG는 빌드 시점의 데이터를 사용하기 때문에 이후에 데이터가 변경되더라도 다시 빌드하지 않는 한 페이지 내용은 업데이트되지 않는다.

#### 정적 경로에 적용하기
```ts
export const getStaticProps = async () => {
  const [allBooks, recommendBooks] = await Promise.all([
    fetchBooks(),
    fetchRandomBooks(),
  ]);

  return {
    props: {
      allBooks,
      recommendBooks,
    },
  };
};
```

```ts
export default function Home({
  allBooks,
  recommendBooks,
}: InferGetStaticPropsType<typeof getStaticProps>) {
  return (
     // ... TSX 코드
  );
};
```
- 빌드 시점에 `getStaticProps`가 실행되어 도서 데이터를 가져온다.

#### 동적 경로에 적용하기
```ts
export const getStaticPaths = () => {
  return {
    paths: [
      { params: { id: "1" }},
      { params: { id: "2" }},
      { params: { id: "3" }},
    ],
    fallbacok: false,
  };
};
```

```ts
export const getStaticProps = async (context: GetStaticPropsContext) => {
  const id = context.params!.id;

  const book = await fetchOneBook(Number(id));

  return {
    props: { book },
  };
};
```

```ts
export default function Page({
  book,
}: InferGetStaticPropsType<typeof getStaticProps>) {
  if (!book) return "문제가 발생했습니다.";

  return (
        // ... TSX 코드
  );
};
```

빌드 타임에
- `getStaticPaths`: 경로 설정하기
  - paths: 미리 만들 페이지들의 목록을 정의한다.
  - `fallback: false`: paths에 명시되지 않은 경로에 접근하면 404 페이지가 표시된다.
- `getStaticProps`: 각각의 경로에 필요한 데이터를 가져오는 역할을 한다.

#### 폴백옵션 설정하기
`fallback` 옵션
> `getStaticPaths`를 사용할 때, 빌드 시점에 미리 생성되지 않은 동적 경로에 대한 요청을 어떻게 처리할지 정의한다.

- `fallback: false`: 목록에 없는 경로로 요청이 들어오면 404 Not Found 페이지를 반환한다.
- `fallback: "blocking"`: 미리 생성되지 않은 경로에 대한 요청이 들어오면 서버는 SSR 방식으로 페이지를 즉시 생성한다.
- `fallback: true`: 미리 생성되지 않은 경로에 대한 요청이 들어오면 데이터가 없는 폴백 상태의 페이지부터 반환하고 서버는 SSR 방식으로 페이지를 생성한다.

### Day 8
#### ISR
#### 주문형 재 검증
#### SEO 설정하기
#### 배포하기

### Day 9
#### 페이지 라우터 정리
#### App Router 시작하기
App Router
- Next.js 13 버전에 새롭게 추가된 라우터
- 기존의 Page Router를 완전히 대체

`npx create-next-app@latest section03`

#### 페이지 라우팅 설정하기
- app/page.tsx: ~/
- app/search/page.tsx: ~/search
- app/book/[id]/page.tsx: 동적 경로 - ~/book/1, ..., ~/book/100, ...

#### 레이아웃 설정하기

### Day 10